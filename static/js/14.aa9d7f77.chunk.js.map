{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","game/BallGameGraph.tsx","game/index.tsx"],"names":["_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","assertThisInitialized","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","this","arguments","apply","_getPrototypeOf","getPrototypeOf","Block","x","y","width","height","alive","lifes","b","a","cond1","cond2","cx","Math","abs","cy","Paddle","canvasWidth","speed","nextX","Ball","canvasHeight","speedX","speedY","fired","lastBump","reboundX","reboundY","BallGame","root","canvas","ctx","keydowns","actions","blocks","status","ball","paddle","levels","onKeyDown","evt","suspend","n","parseInt","isNaN","switchLevel","forEach","l","block","push","onKeyUp","frameLoop","update","clearCanvas","drawCanvas","requestAnimationFrame","document","createElement","appendChild","style","border","getContext","window","addEventListener","registerAction","moveLeft","moveRight","removeEventListener","callback","move","collide","kill","filter","drawPaddle","drawBall","drawBlock","fillStyle","fillRect","clearRect","BallGameGraph","divRef","createRef","game","onCloseClick","close","div","current","padding","ref","onClick","PureComponent","Games"],"mappings":"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","file":"static/js/14.aa9d7f77.chunk.js","sourcesContent":["export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import { Button } from \"antd\";\nimport { createRef, PureComponent } from \"react\";\n\n//砖块\nclass Block {\n  width = 70\n  height = 20\n  alive = true\n  lifes = 2\n  constructor(public x: number, public y: number) { }\n  kill() {\n    this.lifes--\n    if (this.lifes < 1) this.alive = false\n  }\n  collide(b: Ball) {\n    //两个矩形中心点 x轴距离 <= 两个矩形宽和的一半 &&\n    //两个矩形中心点 y轴距离 <= 两个矩形高和的一半\n    const a = this\n    const cond1 = [a.x + a.width / 2, a.y + a.height / 2]\n    const cond2 = [b.x + b.width / 2, b.y + b.height / 2]\n    const cx = Math.abs(cond1[0] - cond2[0])\n    const cy = Math.abs(cond1[1] - cond2[1])\n    if (cx <= (a.width + b.width) / 2 && cy <= (a.height + b.height) / 2) {\n      return true\n    }\n    return false\n  }\n}\n\n//挡板\nclass Paddle {\n  x: number = 100\n  y: number = 350\n  width = 300\n  height = 30\n  speed = 10\n  canvasWidth: number\n  constructor(canvasWidth: number) {\n    this.canvasWidth = canvasWidth\n  }\n  moveLeft() {\n    let nextX = this.x - this.speed\n    if (nextX < 0) nextX = 0\n    this.x = nextX\n  }\n  moveRight() {\n    let nextX = this.x + this.speed\n    if (nextX > this.canvasWidth - this.width) nextX = this.canvasWidth - this.width\n    this.x = nextX\n  }\n  //定义相撞函数\n  collide(b: Ball) {\n    //两个矩形中心点 x轴距离 <= 两个矩形宽和的一半 &&\n    //两个矩形中心点 y轴距离 <= 两个矩形高和的一半\n    const a = this\n    const cond1 = [a.x + a.width / 2, a.y + a.height / 2]\n    const cond2 = [b.x + b.width / 2, b.y + b.height / 2]\n    const cx = Math.abs(cond1[0] - cond2[0])\n    const cy = Math.abs(cond1[1] - cond2[1])\n    if (cx <= (a.width + b.width) / 2 && cy <= (a.height + b.height) / 2) {\n      return true\n    }\n    return false\n  }\n}\n\n//弹球\nclass Ball {\n  x = 100\n  y = 250\n  width = 50\n  height = 50\n  speedX = 3\n  speedY = 3\n  fired = false //发射开关\n  lastBump = false //上一次是否发生相撞\n  canvasWidth: number\n  canvasHeight: number\n  constructor(canvasWidth: number, canvasHeight: number) {\n    this.canvasWidth = canvasWidth\n    this.canvasHeight = canvasHeight\n  }\n  move() {\n    if (!this.fired) return\n    if (this.x < 0 || this.x + this.width > 600) this.reboundX()\n    if (this.y < 0 || this.y + this.height > 400) this.reboundY()\n    this.x += this.speedX\n    this.y += this.speedY\n  }\n  suspend() {\n    this.fired = !this.fired\n  }\n  reboundY() {\n    this.speedY *= -1\n  }\n  reboundX() {\n    this.speedX *= -1\n  }\n}\n\nclass BallGame {\n  width = 600\n  height = 400\n  canvas: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  keydowns: { [key: string]: boolean } = {}\n  actions: { [key: string]: () => void } = {}\n  blocks: Block[] = []\n  status: 'start' | 'end' = 'start'\n  ball: Ball\n  paddle: Paddle\n  levels = [\n    [[50, 50,], [150, 120,]],\n    [[50, 0,], [100, 100,], [150, 130]],\n    [[50, 30,], [100, 100], [200, 100]]\n  ]\n  constructor(root: Element) {\n    this.ball = new Ball(this.width, this.height)\n    this.paddle = new Paddle(this.width)\n    this.canvas = document.createElement('canvas')\n    root.appendChild(this.canvas)\n    this.canvas.width = this.width\n    this.canvas.height = this.height\n    this.canvas.style.border = '1px solid'\n    this.ctx = this.canvas.getContext('2d')!\n\n    window.addEventListener('keydown', this.onKeyDown)\n    window.addEventListener('keyup', this.onKeyUp)\n\n    this.registerAction('a', () => {\n      this.paddle.moveLeft()\n    })\n    this.registerAction('d', () => {\n      this.paddle.moveRight()\n    })\n    this.frameLoop()\n  }\n\n  onKeyDown = (evt: KeyboardEvent) => {\n    this.keydowns[evt.key] = true\n    if (evt.key === 's') {\n      this.ball.suspend()\n    }\n    const n = parseInt(evt.key)\n    if (!isNaN(n)) {\n      this.switchLevel(n)\n    }\n  }\n  switchLevel = (n: number) => {\n    n -= 1\n    this.blocks = []\n    this.levels[n]?.forEach(l => {\n      const block = new Block(l[0], l[1])\n      this.blocks.push(block)\n    })\n  }\n  onKeyUp = (evt: KeyboardEvent) => {\n    this.keydowns[evt.key] = false\n  }\n  close() {\n    this.status = 'end'\n    window.removeEventListener('keydown', this.onKeyDown)\n    window.removeEventListener('keyup', this.onKeyUp)\n  }\n  registerAction(key: string, callback: () => void) {\n    this.actions[key] = callback\n  }\n  frameLoop = () => {\n    //执行按键action\n    for (let key in this.keydowns) {\n      if (this.keydowns[key]) {\n        if (this.actions[key]) this.actions[key]()\n      }\n    }\n    this.update()\n    this.clearCanvas()\n    this.drawCanvas()\n    if (this.status === 'end') return\n    //next frame\n    requestAnimationFrame(this.frameLoop)\n  }\n  update() {\n    this.ball.move()\n    if (this.paddle.collide(this.ball)) {\n      //如果上一帧也是被碰撞，下一帧就不改变球的运动方向\n      if (!this.ball.lastBump) {\n        this.ball.reboundY()\n      }\n      this.ball.lastBump = true\n    } else {\n      this.ball.lastBump = false\n    }\n    this.blocks.forEach(block => {\n      if (block.collide(this.ball)) {\n        this.ball.reboundY()\n        block.kill()\n      }\n    })\n    this.blocks = this.blocks.filter(b => b.alive)\n  }\n  drawCanvas() {\n    this.drawPaddle()\n    this.drawBall()\n    this.drawBlock()\n  }\n  drawBlock() {\n    this.blocks.forEach(b => {\n      this.ctx.fillStyle = 'black'\n      this.ctx.fillRect(b.x, b.y, b.width, b.height)\n    })\n  }\n  drawPaddle() {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(this.paddle.x, this.paddle.y, this.paddle.width, this.paddle.height)\n  }\n  drawBall() {\n    this.ctx.fillStyle = 'red'\n    this.ctx.fillRect(this.ball.x, this.ball.y, this.ball.width, this.ball.height)\n  }\n  //擦除画板\n  clearCanvas() {\n    this.ctx.clearRect(0, 0, this.width, this.height)\n  }\n}\n\nexport default class BallGameGraph extends PureComponent {\n  divRef = createRef<HTMLDivElement>()\n  game: BallGame | null = null\n  componentDidMount() {\n    const div = this.divRef.current!\n    this.game = new BallGame(div)\n  }\n  componentWillUnmount() {\n    this.game?.close()\n  }\n  onCloseClick = () => {\n    this.game?.close()\n  }\n  render() {\n    return (\n      <div style={{ padding: '30px' }}>\n        <div ref={this.divRef} />\n        <Button onClick={this.onCloseClick}>CLOSE</Button>\n      </div>\n    )\n  }\n}","import BallGameGraph from \"./BallGameGraph\";\n\nexport default function Games() {\n  return (\n    <div>\n      <BallGameGraph />\n    </div>\n  )\n}"],"sourceRoot":""}