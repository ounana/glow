(this.webpackJsonpglow=this.webpackJsonpglow||[]).push([[12],{110:function(t,e,i){"use strict";function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}i.d(e,"a",(function(){return n}))},131:function(t,e,i){"use strict";function n(t){if(Array.isArray(t))return t}i.d(e,"a",(function(){return n}))},132:function(t,e,i){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.d(e,"a",(function(){return n}))},137:function(t,e,i){"use strict";function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",(function(){return n}))},146:function(t,e,i){"use strict";function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}i.d(e,"a",(function(){return n}))},153:function(t,e,i){"use strict";function n(t){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.d(e,"a",(function(){return r}));var s=i(110);function r(t,e){return!e||"object"!==n(e)&&"function"!==typeof e?Object(s.a)(t):e}},52:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(131);var s=i(24),r=i(132);function a(t,e){return Object(n.a)(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(h){s=!0,r=h}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}return i}}(t,e)||Object(s.a)(t,e)||Object(r.a)()}},53:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return n}))},59:function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i.d(e,"a",(function(){return s}))},61:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(137);function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(n.a)(t,e)}},62:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(81),s=i(146),r=i(153);function a(t){var e=Object(s.a)();return function(){var i,s=Object(n.a)(t);if(e){var a=Object(n.a)(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return Object(r.a)(this,i)}}},81:function(t,e,i){"use strict";function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.d(e,"a",(function(){return n}))},980:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return R}));var n=i(53),s=i(59),r=i(61),a=i(62),o=i(0),h=i(16),u=i.n(h),c=i(22),d=i(52),f=i.p+"static/media/bg.e4e8e136.jpg",v=i.p+"static/media/grass.1eb6d96a.png",l=i.p+"static/media/tree.59acd441.png",g=i.p+"static/media/gun_lens.03cde218.png",y=i.p+"static/media/blast.cfe08dab.png",p=i.p+"static/media/duck_1.107a591a.png",w=i.p+"static/media/duck_2.27f84f10.png",m=i.p+"static/media/duck_3.0e93dab9.png",k=i.p+"static/media/duck_4.aa120666.png",b=i.p+"static/media/ds_shot.94309abe.ogg",x=i.p+"static/media/ds_duck_hit.e416f1e5.ogg";function O(){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(u.a.mark((function t(){var e,i,n,s,r,a,o,h,c,b,x;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([P(f),P(v),P(l),P(g),P(y),P(p),P(w),P(m),P(k)]);case 2:return e=t.sent,i=Object(d.a)(e,9),n=i[0],s=i[1],r=i[2],a=i[3],o=i[4],h=i[5],c=i[6],b=i[7],x=i[8],t.abrupt("return",{BG:n,GRASS:s,TREE:r,GUN_LENS:a,BLAST:o,DUCK_1:h,DUCK_2:c,DUCK_3:b,DUCK_4:x});case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var P=function(t){return new Promise((function(e,i){var n=new Image;n.src=t,n.onload=function(){e(n)},n.onerror=function(t){i(t)}}))},S={DS_SHOT:b,DS_DUCK_HIT:x},L=function(){function t(){Object(n.a)(this,t)}return Object(s.a)(t,[{key:"loadImage",value:function(t,e){var i=new Image;i.src=t,i.onload=function(){e(i)}}},{key:"playAudio",value:function(t){var e=document.createElement("audio");e.volume=.3,e.src=t,e.autoplay=!0}}],[{key:"instance",get:function(){return this.ins||(this.ins=new t),this.ins}}]),t}();L.ins=null;var D=function(){function t(e,i){Object(n.a)(this,t),this.canvasWidth=e,this.canvasHeight=i,this.id=Date.now()+Math.random(),this.x=0,this.y=0,this.width=200,this.height=200,this.direction=0,this.type=1,this.liveProgress=0,this.livePosition=[[0,0],[200,0],[400,0],[600,0],[800,0],[1e3,0],[1200,0],[1400,0]],this.deadProgress=0,this.deadPosition=[[1600,0],[0,200],[200,200],[400,200],[600,200],[800,200],[1e3,200],[1200,200],[1400,200],[1600,200],[0,400],[200,400],[400,400],[600,400],[800,400],[1e3,400],[1200,400],[1400,400],[1600,400],[0,600],[200,600],[400,600],[600,600],[800,600],[1e3,600],[1200,600],[1400,600],[1600,600],[0,800],[200,800],[400,800],[600,800],[800,800],[1e3,800],[1200,800],[1400,800],[1600,800]],this.speedX=4*Math.random(),this.speedY=4*Math.random(),this.invalid=!1,this.dead=!1,this.direction=~~(2*Math.random());var s=e-this.width;this.x=s/2*Math.random()+s/2,this.y=i-2*this.height,this.type=1+~~(4*Math.random())}return Object(s.a)(t,[{key:"getCenterBox",value:function(t){var e=this.x,i=this.y;this.direction&&(e=this.getDirectionX());var n=[e+this.width/2,i+this.height/2];return{x:n[0]-t/2,y:n[1]-t/2,width:t,height:t}}},{key:"getDirectionX",value:function(){return this.canvasWidth/2-(this.x+this.width-this.canvasWidth/2)}},{key:"updateDead",value:function(){this.dead=!0,L.instance.playAudio(S.DS_DUCK_HIT)}},{key:"move",value:function(){this.dead?this.y+=6:(this.x-=this.speedX,this.y-=this.speedY),(this.x<0-this.width||this.y<0-this.height||this.y>this.canvasHeight)&&(this.invalid=!0)}},{key:"update",value:function(){this.dead?this.updateDeadProgress():this.updateLiveProgress(),this.move()}},{key:"updateDeadProgress",value:function(){var t=this.deadProgress+1;t=t>36?36:t,this.deadProgress=t}},{key:"updateLiveProgress",value:function(){var t=this.liveProgress+1;t=t>7?0:t,this.liveProgress=t}}]),t}(),_=function(){function t(e,i){Object(n.a)(this,t),this.canvasWidth=e,this.canvasHeight=i,this.x=0,this.y=0,this.width=150,this.height=150,this.speed=10,this.fireProgress=24,this.firePosition=[[0,0],[200,0],[400,0],[600,0],[800,0],[0,200],[200,200],[400,200],[600,200],[800,200],[0,400],[200,400],[400,400],[600,400],[800,400],[0,600],[200,600],[400,600],[600,600],[800,600],[0,800],[200,800],[400,800],[600,800],[800,800]],this.fireing=!1}return Object(s.a)(t,[{key:"updateFireProgress",value:function(){var t=this.fireProgress+1;t>24&&(t=24,this.fireing=!1),this.fireProgress=t}},{key:"getCenterBox",value:function(t){var e=[this.x+this.width/2,this.y+this.height/2];return{x:e[0]-t/2,y:e[1]-t/2,width:t,height:t}}},{key:"fired",value:function(t){var e=this;this.fireing=!0,this.fireProgress=0,L.instance.playAudio(S.DS_SHOT),t.forEach((function(t){var i=e.getCenterBox(10),n=t.getCenterBox(100);e.collide(i,n)&&t.updateDead()}))}},{key:"collide",value:function(t,e){var i=[t.x+t.width/2,t.y+t.height/2],n=[e.x+e.width/2,e.y+e.height/2],s=Math.abs(i[0]-n[0]),r=Math.abs(i[1]-n[1]);return s<=(t.width+e.width)/2&&r<=(t.height+e.height)/2}},{key:"moveLeft",value:function(){var t=this.x-this.speed;t<0&&(t=0),this.x=t}},{key:"moveRight",value:function(){var t=this.x+this.speed;t>this.canvasWidth-this.width&&(t=this.canvasWidth-this.width),this.x=t}},{key:"moveTop",value:function(){var t=this.y-this.speed;t<0&&(t=0),this.y=t}},{key:"moveBottom",value:function(){var t=this.y+this.speed;t>this.canvasHeight-this.height&&(t=this.canvasHeight-this.height),this.y=t}}]),t}(),C=function(){function t(e){var i=this;Object(n.a)(this,t),this.root=e,this.canvas=void 0,this.ctx=void 0,this.width=void 0,this.height=void 0,this.images={},this.keydowns={},this.gunLens=void 0,this.ducks=[],this.suspend=!1,this.onKeyDown=function(t){i.keydowns[t.key]=!0,i.keyDownHandle(t)},this.onKeyUp=function(t){i.keydowns[t.key]=!1},this.render=function(){i.update(),i.clearCanvas(),i.draw(),i.suspend||requestAnimationFrame(i.render)},this.drawScene=function(){var t=i.images,e=t.BG,n=t.GRASS,s=t.TREE,r=i.getScale(),a=r.scaleX,o=r.scaleY,h=s.naturalWidth*a,u=s.naturalHeight*o,c=[i.width,i.width/n.naturalWidth*n.naturalHeight],d=c[0],f=c[1],v=i.height-f,l=i.height-u-f/2;i.ctx.drawImage(e,0,0,i.width,i.height),i.ctx.drawImage(s,0,l,h,u),i.ctx.drawImage(n,0,v,d,f)};var s=this.createCanvas(),r=s.canvas,a=s.ctx;this.canvas=r,this.ctx=a,e.appendChild(this.canvas);var o=this.getCanvasSize(),h=o.width,u=o.height;this.canvas.width=h,this.canvas.height=u,this.width=h,this.height=u,this.gunLens=new _(this.width,this.height),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.setup()}return Object(s.a)(t,[{key:"createCanvas",value:function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.style.border="1px solid",{canvas:t,ctx:e}}},{key:"getCanvasSize",value:function(){var t=this.root.getBoundingClientRect();this.canvas.height=t.height;var e=1.3*t.height;return{width:e=e>t.width?t.width:e,height:t.height}}},{key:"close",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"keyDownHandle",value:function(t){switch(t.code){case"Space":return t.preventDefault(),void this.gunLens.fired(this.ducks);case"KeyG":return void this.generateDuck();case"KeyX":return void this.switchSuspend()}}},{key:"switchSuspend",value:function(){this.suspend=!this.suspend,this.suspend||requestAnimationFrame(this.render)}},{key:"generateDuck",value:function(){for(var t=1+~~(2*Math.random()),e=0;e<t;e++){var i=new D(this.width,this.height);this.ducks.push(i)}}},{key:"setup",value:function(){var t=Object(c.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:this.images=t.sent,this.render();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"draw",value:function(){this.drawScene(),this.drawGunLens(),this.drawDuck()}},{key:"drawDuck",value:function(){var t=this;this.ducks.forEach((function(e){var i="DUCK_"+e.type,n=t.images[i],s=e.dead?e.deadPosition[e.deadProgress]:e.livePosition[e.liveProgress],r=e.width,a=e.height;t.ctx.save(),e.direction&&(t.ctx.scale(-1,1),t.ctx.translate(-t.width,0)),t.ctx.drawImage(n,s[0],s[1],r,a,e.x,e.y,r,a),t.ctx.restore()}))}},{key:"update",value:function(){this.checkKeydowns(),this.gunLens.fireing&&this.gunLens.updateFireProgress(),this.ducks.forEach((function(t){return t.update()})),this.ducks=this.ducks.filter((function(t){return!t.invalid}))}},{key:"checkKeydowns",value:function(){var t=this;Object.keys(this.keydowns).forEach((function(e){if(t.keydowns[e])switch(e){case"a":return t.gunLens.moveLeft();case"d":return t.gunLens.moveRight();case"w":return t.gunLens.moveTop();case"s":return t.gunLens.moveBottom()}}))}},{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"getScale",value:function(){var t=this.images.BG,e=t.naturalWidth,i=t.naturalHeight;return{scaleX:this.width/e,scaleY:this.height/i}}},{key:"drawGunLens",value:function(){var t=this.images,e=t.GUN_LENS,i=t.BLAST;if(this.ctx.drawImage(e,this.gunLens.x,this.gunLens.y,this.gunLens.width,this.gunLens.height),this.gunLens.fireing){var n=this.gunLens.firePosition[this.gunLens.fireProgress];this.ctx.drawImage(i,n[0],n[1],200,200,this.gunLens.x-25,this.gunLens.y-25,200,200)}}}]),t}(),E=i(3),R=function(t){Object(r.a)(i,t);var e=Object(a.a)(i);function i(){var t;Object(n.a)(this,i);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).divRef=Object(o.createRef)(),t.game=null,t}return Object(s.a)(i,[{key:"componentDidMount",value:function(){var t=this.divRef.current;this.game=new C(t)}},{key:"componentWillUnmount",value:function(){this.game.close()}},{key:"render",value:function(){return Object(E.jsx)("div",{ref:this.divRef,style:{background:"#fff",width:"100vw",height:"100vh",textAlign:"center"}})}}]),i}(o.PureComponent)}}]);
//# sourceMappingURL=12.79e8bc47.chunk.js.map