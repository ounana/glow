{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","duckshooter/images/bg.jpg","duckshooter/images/grass.png","duckshooter/images/tree.png","duckshooter/images/gun_lens.png","duckshooter/images/blast.png","duckshooter/images/duck_1.png","duckshooter/images/duck_2.png","duckshooter/images/duck_3.png","duckshooter/images/duck_4.png","duckshooter/sounds/ds_shot.ogg","duckshooter/sounds/ds_duck_hit.ogg","duckshooter/source.ts","duckshooter/utils.ts","duckshooter/DuckShooter.ts","duckshooter/index.tsx"],"names":["_assertThisInitialized","self","ReferenceError","_arrayWithHoles","arr","Array","isArray","_nonIterableRest","TypeError","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","assertThisInitialized","_slicedToArray","i","arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","nonIterableRest","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","this","arguments","apply","_getPrototypeOf","getPrototypeOf","loadImages","a","Promise","all","loadImage","bg","grass","tree","gun_lens","blast","duck_1","duck_2","duck_3","duck_4","BG","GRASS","TREE","GUN_LENS","BLAST","DUCK_1","DUCK_2","DUCK_3","DUCK_4","url","resolve","reject","image","Image","src","onload","onerror","SOUNDS","DS_SHOT","DS_DUCK_HIT","Utils","audio","document","createElement","volume","autoplay","ins","Duck","canvasWidth","canvasHeight","id","now","Math","random","x","y","width","height","direction","type","liveProgress","livePosition","deadProgress","deadPosition","speedX","speedY","invalid","dead","maxX","n","getDirectionX","center","playAudio","updateDeadProgress","updateLiveProgress","move","nextProgress","GunLens","speed","fireProgress","firePosition","fireing","ducks","forEach","duck","getCenterBox","b","collide","updateDead","cond1","cond2","cx","abs","cy","nextX","nextY","DuckShooter","root","canvas","ctx","images","keydowns","gunLens","suspend","onKeyDown","evt","keyDownHandle","onKeyUp","render","update","clearCanvas","draw","requestAnimationFrame","drawScene","getScale","scaleX","scaleY","treeWidth","naturalWidth","treeHeight","naturalHeight","grassWidth","grassHeight","grassY","treeY","drawImage","createCanvas","appendChild","getCanvasSize","window","addEventListener","setup","getContext","style","border","rootRect","getBoundingClientRect","removeEventListener","code","preventDefault","fired","generateDuck","switchSuspend","duckCount","drawGunLens","drawDuck","duckmap","save","scale","translate","restore","checkKeydowns","updateFireProgress","filter","d","keys","moveLeft","moveRight","moveTop","moveBottom","clearRect","firemap","DuckShooterGraph","divRef","createRef","game","div","current","close","ref","background","textAlign","PureComponent"],"mappings":"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","file":"static/js/12.79e8bc47.chunk.js","sourcesContent":["export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default __webpack_public_path__ + \"static/media/bg.e4e8e136.jpg\";","export default __webpack_public_path__ + \"static/media/grass.1eb6d96a.png\";","export default __webpack_public_path__ + \"static/media/tree.59acd441.png\";","export default __webpack_public_path__ + \"static/media/gun_lens.03cde218.png\";","export default __webpack_public_path__ + \"static/media/blast.cfe08dab.png\";","export default __webpack_public_path__ + \"static/media/duck_1.107a591a.png\";","export default __webpack_public_path__ + \"static/media/duck_2.27f84f10.png\";","export default __webpack_public_path__ + \"static/media/duck_3.0e93dab9.png\";","export default __webpack_public_path__ + \"static/media/duck_4.aa120666.png\";","export default __webpack_public_path__ + \"static/media/ds_shot.94309abe.ogg\";","export default __webpack_public_path__ + \"static/media/ds_duck_hit.e416f1e5.ogg\";","import bg from './images/bg.jpg'\nimport grass from './images/grass.png'\nimport tree from './images/tree.png'\nimport gun_lens from './images/gun_lens.png'\nimport blast from './images/blast.png'\nimport duck_1 from './images/duck_1.png'\nimport duck_2 from './images/duck_2.png'\nimport duck_3 from './images/duck_3.png'\nimport duck_4 from './images/duck_4.png'\n\nimport DS_SHOT from './sounds/ds_shot.ogg'\nimport DS_DUCK_HIT from './sounds/ds_duck_hit.ogg'\n\nexport interface Images {\n  [key: string]: HTMLImageElement\n}\n\nexport async function loadImages() {\n  const [\n    BG,\n    GRASS,\n    TREE,\n    GUN_LENS,\n    BLAST,\n    DUCK_1,\n    DUCK_2,\n    DUCK_3,\n    DUCK_4,\n  ] = await Promise.all([\n    loadImage(bg),\n    loadImage(grass),\n    loadImage(tree),\n    loadImage(gun_lens),\n    loadImage(blast),\n    loadImage(duck_1),\n    loadImage(duck_2),\n    loadImage(duck_3),\n    loadImage(duck_4),\n  ])\n  return {\n    BG,\n    GRASS,\n    TREE,\n    GUN_LENS,\n    BLAST,\n    DUCK_1,\n    DUCK_2,\n    DUCK_3,\n    DUCK_4,\n  }\n}\n\nconst loadImage = (url: string) => new Promise<HTMLImageElement>((resolve, reject) => {\n  const image = new Image()\n  image.src = url\n  image.onload = () => {\n    resolve(image)\n  }\n  image.onerror = err => {\n    reject(err)\n  }\n})\n\nexport const SOUNDS = {\n  DS_SHOT,\n  DS_DUCK_HIT\n}","export default class Utils {\n  private static ins: Utils | null = null\n  private constructor() { }\n  static get instance() {\n    if (!this.ins) {\n      this.ins = new Utils()\n    }\n    return this.ins\n  }\n  loadImage(url: string, call: (image: HTMLImageElement) => void) {\n    const image = new Image()\n    image.src = url\n    image.onload = () => {\n      call(image)\n    }\n  }\n  playAudio(url: string) {\n    const audio = document.createElement('audio')\n    audio.volume = 0.3\n    audio.src = url\n    audio.autoplay = true\n  }\n}\n","import { loadImages, Images, SOUNDS } from './source'\nimport Utils from './utils'\n\ninterface Rect {\n  x: number\n  y: number\n  width: number\n  height: number\n}\n/**\n * 鸭子\n */\nclass Duck implements Rect {\n  id = Date.now() + Math.random()\n  x = 0\n  y = 0\n  width = 200\n  height = 200\n  direction: 0 | 1 = 0 //是否水平翻转渲染\n  type: 1 | 2 | 3 | 4 = 1 //鸭子图片类型\n  liveProgress = 0 //活着画面进度 0 - 7\n  livePosition = [\n    [0, 0], [200, 0], [400, 0], [600, 0],\n    [800, 0], [1000, 0], [1200, 0], [1400, 0]\n  ]\n  deadProgress = 0 //死亡画面进度 0 - 36\n  deadPosition = [\n    [1600, 0],\n    [0, 200], [200, 200], [400, 200], [600, 200], [800, 200], [1000, 200], [1200, 200], [1400, 200], [1600, 200],\n    [0, 400], [200, 400], [400, 400], [600, 400], [800, 400], [1000, 400], [1200, 400], [1400, 400], [1600, 400],\n    [0, 600], [200, 600], [400, 600], [600, 600], [800, 600], [1000, 600], [1200, 600], [1400, 600], [1600, 600],\n    [0, 800], [200, 800], [400, 800], [600, 800], [800, 800], [1000, 800], [1200, 800], [1400, 800], [1600, 800],\n  ]\n  speedX = Math.random() * 4\n  speedY = Math.random() * 4\n  invalid = false // 超出边界\n  dead = false // 击中死亡\n  constructor(public canvasWidth: number, public canvasHeight: number) {\n    //初始化方位\n    this.direction = ~~(Math.random() * 2) as 0 | 1\n    //初始化位置 朝左的右半场 反之左半场\n    const maxX = canvasWidth - this.width\n    this.x = (maxX / 2) * Math.random() + (maxX / 2)\n    this.y = canvasHeight - this.height * 2\n    //初始化鸭子类型\n    this.type = ~~(Math.random() * 4) + 1 as 1 | 2 | 3 | 4\n  }\n  //以鸭子中心，取n*n的矩形\n  getCenterBox(n: number): Rect {\n    let { x, y } = this\n    if (this.direction) {\n      x = this.getDirectionX()\n    }\n    const center = [x + this.width / 2, y + this.height / 2]\n    return { x: center[0] - n / 2, y: center[1] - n / 2, width: n, height: n }\n  }\n  //水平翻转后，鸭子的实际x坐标\n  getDirectionX() {\n    return (this.canvasWidth / 2) - (this.x + this.width - (this.canvasWidth / 2))\n  }\n  updateDead() {\n    this.dead = true\n    //播放死亡音频\n    Utils.instance.playAudio(SOUNDS.DS_DUCK_HIT)\n  }\n  move() {\n    if (this.dead) {\n      this.y += 6\n    } else {\n      this.x -= this.speedX\n      this.y -= this.speedY\n    }\n    //判定 鸭子是否超出边界\n    if (\n      this.x < 0 - this.width || this.y < 0 - this.height || this.y > this.canvasHeight\n    ) {\n      this.invalid = true\n    }\n  }\n  update() {\n    if (this.dead) {\n      this.updateDeadProgress()\n    } else {\n      this.updateLiveProgress()\n    }\n    this.move()\n  }\n  updateDeadProgress() {\n    let nextProgress = this.deadProgress + 1\n    nextProgress = nextProgress > 36 ? 36 : nextProgress\n    this.deadProgress = nextProgress\n  }\n  updateLiveProgress() {\n    let nextProgress = this.liveProgress + 1\n    nextProgress = nextProgress > 7 ? 0 : nextProgress\n    this.liveProgress = nextProgress\n  }\n}\n\n/**\n * 枪镜头\n */\nclass GunLens implements Rect {\n  x = 0\n  y = 0\n  width = 150\n  height = 150\n  speed = 10\n  fireProgress = 24 //开火进度 0 - 24\n  firePosition = [ //开火图片定位\n    [0, 0], [200, 0], [400, 0], [600, 0], [800, 0],\n    [0, 200], [200, 200], [400, 200], [600, 200], [800, 200],\n    [0, 400], [200, 400], [400, 400], [600, 400], [800, 400],\n    [0, 600], [200, 600], [400, 600], [600, 600], [800, 600],\n    [0, 800], [200, 800], [400, 800], [600, 800], [800, 800]\n  ]\n  fireing = false //开火状态\n  constructor(public canvasWidth: number, public canvasHeight: number) { }\n  updateFireProgress() {\n    let nextProgress = this.fireProgress + 1\n    if (nextProgress > 24) {\n      nextProgress = 24\n      this.fireing = false\n    }\n    this.fireProgress = nextProgress\n  }\n  //以镜头中心，取n*n的矩形\n  getCenterBox(n: number): Rect {\n    const center = [this.x + this.width / 2, this.y + this.height / 2]\n    return { x: center[0] - n / 2, y: center[1] - n / 2, width: n, height: n }\n  }\n  fired(ducks: Duck[]) {\n    this.fireing = true\n    this.fireProgress = 0\n    Utils.instance.playAudio(SOUNDS.DS_SHOT)\n    //判定是否击中鸭子\n    ducks.forEach(duck => {\n      const a = this.getCenterBox(10)\n      const b = duck.getCenterBox(100)\n      if (this.collide(a, b)) {\n        duck.updateDead()\n      }\n    })\n  }\n  collide(a: Rect, b: Rect) {\n    //两个矩形中心点 x轴距离 <= 两个矩形宽和的一半 &&\n    //两个矩形中心点 y轴距离 <= 两个矩形高和的一半\n    const cond1 = [a.x + a.width / 2, a.y + a.height / 2]\n    const cond2 = [b.x + b.width / 2, b.y + b.height / 2]\n    const cx = Math.abs(cond1[0] - cond2[0])\n    const cy = Math.abs(cond1[1] - cond2[1])\n    if (cx <= (a.width + b.width) / 2 && cy <= (a.height + b.height) / 2) {\n      return true\n    }\n    return false\n  }\n  moveLeft() {\n    let nextX = this.x - this.speed\n    if (nextX < 0) nextX = 0\n    this.x = nextX\n  }\n  moveRight() {\n    let nextX = this.x + this.speed\n    if (nextX > this.canvasWidth - this.width) nextX = this.canvasWidth - this.width\n    this.x = nextX\n  }\n  moveTop() {\n    let nextY = this.y - this.speed\n    if (nextY < 0) nextY = 0\n    this.y = nextY\n  }\n  moveBottom() {\n    let nextY = this.y + this.speed\n    if (nextY > this.canvasHeight - this.height) nextY = this.canvasHeight - this.height\n    this.y = nextY\n  }\n}\n/**\n * 鸭子射手\n */\nexport class DuckShooter {\n  canvas: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  width: number\n  height: number\n  images: Images = {}\n  keydowns: { [key: string]: boolean } = {}\n  gunLens: GunLens\n  ducks: Duck[] = []\n  suspend = false\n  constructor(public root: HTMLDivElement) {\n    const { canvas, ctx } = this.createCanvas()\n    this.canvas = canvas\n    this.ctx = ctx\n    root.appendChild(this.canvas)\n    const { width, height } = this.getCanvasSize()\n    this.canvas.width = width\n    this.canvas.height = height\n    this.width = width\n    this.height = height\n    this.gunLens = new GunLens(this.width, this.height)\n    window.addEventListener('keydown', this.onKeyDown)\n    window.addEventListener('keyup', this.onKeyUp)\n    this.setup()\n  }\n  createCanvas(): { canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D } {\n    const canvas = document.createElement('canvas')\n    const ctx = canvas.getContext('2d')!\n    canvas.style.border = '1px solid'\n    return { canvas, ctx }\n  }\n  getCanvasSize(): { width: number, height: number } {\n    const rootRect = this.root.getBoundingClientRect()\n    this.canvas.height = rootRect.height\n    let width = rootRect.height * 1.3\n    width = width > rootRect.width ? rootRect.width : width\n    return { width, height: rootRect.height }\n  }\n  close() {\n    window.removeEventListener('keydown', this.onKeyDown)\n    window.removeEventListener('keyup', this.onKeyUp)\n  }\n  keyDownHandle(evt: KeyboardEvent) {\n    switch (evt.code) {\n      case 'Space':\n        evt.preventDefault()\n        this.gunLens.fired(this.ducks)\n        return\n      case 'KeyG':\n        //生成鸭子\n        this.generateDuck()\n        return\n      case 'KeyX':\n        this.switchSuspend()\n        return\n      default:\n    }\n  }\n  switchSuspend() {\n    this.suspend = !this.suspend\n    if (!this.suspend) {\n      requestAnimationFrame(this.render)\n    }\n  }\n  generateDuck() {\n    //一次创建 1 ～ 2 只鸭子\n    const duckCount = ~~(Math.random() * 2) + 1\n    for (let i = 0; i < duckCount; i++) {\n      const duck = new Duck(this.width, this.height)\n      this.ducks.push(duck)\n    }\n  }\n  onKeyDown = (evt: KeyboardEvent) => {\n    this.keydowns[evt.key] = true\n    this.keyDownHandle(evt)\n  }\n  onKeyUp = (evt: KeyboardEvent) => {\n    this.keydowns[evt.key] = false\n  }\n  async setup() {\n    //加载图片数据\n    this.images = await loadImages()\n    this.render()\n  }\n  render = () => {\n    this.update()\n    this.clearCanvas()\n    this.draw()\n    if (!this.suspend) requestAnimationFrame(this.render)\n  }\n  draw() {\n    this.drawScene()\n    this.drawGunLens()\n    this.drawDuck()\n  }\n  drawDuck() {\n    this.ducks.forEach(duck => {\n      let key = 'DUCK_' + duck.type\n      const image = this.images[key]\n      const duckmap = duck.dead ? duck.deadPosition[duck.deadProgress] : duck.livePosition[duck.liveProgress]\n      const { width, height } = duck\n      this.ctx.save()\n      if (duck.direction) {\n        this.ctx.scale(-1, 1)\n        this.ctx.translate(-this.width, 0)\n      }\n      this.ctx.drawImage(image, duckmap[0], duckmap[1], width, height, duck.x, duck.y, width, height)\n      this.ctx.restore()\n    })\n  }\n  update() {\n    //更新按键操作\n    this.checkKeydowns()\n    //更新开火进度\n    if (this.gunLens.fireing) {\n      this.gunLens.updateFireProgress()\n    }\n    //更新鸭子飞行状态\n    this.ducks.forEach(duck => duck.update())\n    //删除无效的鸭子\n    this.ducks = this.ducks.filter(d => !d.invalid)\n  }\n  checkKeydowns() {\n    Object.keys(this.keydowns).forEach(key => {\n      if (!this.keydowns[key]) return\n      switch (key) {\n        case 'a':\n          return this.gunLens.moveLeft()\n        case 'd':\n          return this.gunLens.moveRight()\n        case 'w':\n          return this.gunLens.moveTop()\n        case 's':\n          return this.gunLens.moveBottom()\n        default:\n      }\n    })\n  }\n  clearCanvas() {\n    this.ctx.clearRect(0, 0, this.width, this.height)\n  }\n  //计算缩放比例\n  getScale() {\n    const { BG } = this.images\n    const { naturalWidth, naturalHeight } = BG\n    return { scaleX: this.width / naturalWidth, scaleY: this.height / naturalHeight }\n  }\n  drawScene = () => {\n    const { BG, GRASS, TREE } = this.images\n    const { scaleX, scaleY } = this.getScale()\n    const [treeWidth, treeHeight] = [\n      TREE.naturalWidth * scaleX, TREE.naturalHeight * scaleY\n    ]\n    const [grassWidth, grassHeight] = [\n      this.width, (this.width / GRASS.naturalWidth) * GRASS.naturalHeight\n    ]\n    const [grassX, grassY] = [0, this.height - grassHeight]\n    const [treeX, treeY] = [0, this.height - treeHeight - grassHeight / 2]\n    this.ctx.drawImage(BG, 0, 0, this.width, this.height)\n    this.ctx.drawImage(TREE, treeX, treeY, treeWidth, treeHeight)\n    this.ctx.drawImage(GRASS, grassX, grassY, grassWidth, grassHeight)\n  }\n  drawGunLens() {\n    const { GUN_LENS, BLAST } = this.images\n    this.ctx.drawImage(GUN_LENS, this.gunLens.x, this.gunLens.y, this.gunLens.width, this.gunLens.height)\n    if (!this.gunLens.fireing) return\n    const firemap = this.gunLens.firePosition[this.gunLens.fireProgress]\n    this.ctx.drawImage(BLAST, firemap[0], firemap[1], 200, 200, this.gunLens.x - 25, this.gunLens.y - 25, 200, 200)\n  }\n}","import { createRef, PureComponent } from \"react\";\nimport { DuckShooter } from \"./DuckShooter\";\n\nexport default class DuckShooterGraph extends PureComponent {\n  divRef = createRef<HTMLDivElement>()\n  game: DuckShooter | null = null\n  componentDidMount() {\n    const div = this.divRef.current!\n    this.game = new DuckShooter(div)\n  }\n  componentWillUnmount() {\n    this.game!.close()\n  }\n  render() {\n    return (\n      <div\n        ref={this.divRef}\n        style={{\n          background: '#fff', width: '100vw',\n          height: '100vh', textAlign: 'center'\n        }}>\n      </div>\n    )\n  }\n}"],"sourceRoot":""}